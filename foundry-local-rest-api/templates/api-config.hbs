<form class="foundry-local-rest-api-config">
    <div class="form-header">
        <h2><i class="fas fa-key"></i> {{localize "foundry-local-rest-api.config.title"}}</h2>
    </div>
    <p class="notes">{{localize "foundry-local-rest-api.config.description"}}</p>

    <div class="form-group">
        <label>{{localize "foundry-local-rest-api.config.status"}}</label>
        <div class="form-fields">
            <span class="api-status {{#if isEnabled}}enabled{{else}}disabled{{/if}}">
                <i class="fas {{#if isEnabled}}fa-check-circle{{else}}fa-times-circle{{/if}}"></i>
                {{#if isEnabled}}{{localize "foundry-local-rest-api.config.enabled"}}{{else}}{{localize "foundry-local-rest-api.config.disabled"}}{{/if}}
            </span>
        </div>
    </div>

    <div class="form-group">
        <label for="api-key-display">{{localize "foundry-local-rest-api.config.api-key"}}</label>
        <div class="form-fields">
            <div class="input-with-buttons">
                <input type="text" id="api-key-display" value="{{apiKey}}" readonly class="api-key-field">
                <div class="button-group">
                    {{#if hasApiKey}}
                    <button type="button" id="copy-api-key" title="{{localize 'foundry-local-rest-api.config.copy'}}">
                        <i class="fas fa-copy"></i>
                    </button>
                    {{/if}}
                    <button type="button" id="regenerate-api-key" class="danger" title="{{localize 'foundry-local-rest-api.config.regenerate'}}">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="base-url">{{localize "foundry-local-rest-api.config.base-url"}}</label>
        <div class="form-fields">
            <input type="text" id="base-url" value="{{baseUrl}}" readonly>
            <p class="notes">{{localize "foundry-local-rest-api.config.base-url-hint"}}</p>
        </div>
    </div>

    <div class="form-group">
        <label>{{localize "foundry-local-rest-api.config.connection-test"}}</label>
        <div class="form-fields">
            <button type="button" id="test-connection">
                <i class="fas fa-plug"></i> {{localize "foundry-local-rest-api.config.test"}}
            </button>
            <p class="notes">{{localize "foundry-local-rest-api.config.test-hint"}}</p>
        </div>
    </div>

    {{#if hasApiKey}}
    <div class="form-group">
        <label>{{localize "foundry-local-rest-api.config.example-usage"}}</label>
        <div class="form-fields">
            <div class="code-block-wrapper">
                <pre class="code-example"><code>curl -H "X-API-Key: {{apiKey}}" {{baseUrl}}/status</code></pre>
                <button class="copy-code-btn" title="Copy Command"><i class="fas fa-clipboard"></i></button>
            </div>
            <p class="notes">{{localize "foundry-local-rest-api.config.example-hint"}}</p>
        </div>
    </div>
    {{/if}}
</form>
